{"version":3,"file":"main.js","mappings":"mBACA,SAASA,EAAUC,GACjBA,EAAMC,UAAUC,IAAI,mBACpBC,SAASC,iBAAiB,UAAWC,GACrCL,EAAMI,iBAAiB,QAASE,EAClC,CAGA,SAASC,EAAWP,GAClBA,EAAMC,UAAUO,OAAO,mBACvBL,SAASM,oBAAoB,UAAWJ,GACxCL,EAAMS,oBAAoB,QAASH,EACrC,CAGA,SAASD,EAAeK,GACN,WAAZA,EAAIC,KACNJ,EAAWJ,SAASS,cAAc,oBAEtC,CAGA,SAASN,EAAeO,GAClBA,EAAKC,SAAWD,EAAKE,eACvBR,EAAWM,EAAKC,OAEpB,CC1BO,SAASE,EAAWC,EAAaC,EAAMC,EAAWC,EAAKC,GAE5D,IAEMC,EAFenB,SAASS,cAAc,kBAAkBW,QAEhCX,cAAc,SAASY,WAAU,GACzDC,EAAYH,EAASV,cAAc,gBACnCc,EAAYJ,EAASV,cAAc,gBACnCe,EAAeL,EAASV,cAAc,wBACtCgB,EAAaN,EAASV,cAAc,sBACpCiB,EAAYP,EAASV,cAAc,qBA0BzC,OAxBAa,EAAUK,IAAMb,EAAYc,KAC5BN,EAAUO,IAAMf,EAAYgB,KAC5BP,EAAUQ,YAAcjB,EAAYgB,KAGhChB,EAAYkB,MAAMC,MAAQlB,EAAKkB,KACjCT,EAAaU,MAAMC,QAAU,OAC7BX,EAAaY,UAAW,GAExBZ,EAAavB,iBAAiB,SAAS,kBAAMgB,EAAIE,EAAUL,EAAY,IAIrDA,EAAYuB,MAAMC,MAAK,SAACC,GAAQ,OAAOA,EAAGN,MAAQlB,EAAKkB,GAAG,KAE5ER,EAAW3B,UAAUC,IAAI,+BAI3B2B,EAAUK,YAAcjB,EAAYuB,MAAMG,OAE1Cf,EAAWxB,iBAAiB,SAAS,SAAAM,GAAG,OAAIW,EAAIX,EAAII,OAAQG,EAAYmB,IAAI,IAC5EX,EAAUrB,iBAAiB,QAASe,GAE7BG,CACT,CASO,IAKMsB,EAAa,SAACC,EAAKC,GAC9BD,EAAI5C,UAAU8C,OAAO,+BACrBF,EAAIG,mBAAmBd,YAAcY,EAAMN,MAAMG,MACnD,ECrDMM,EAAS,CACXC,QAAS,2CACTC,QAAS,CACPC,cAAe,uCACf,eAAgB,qBAIhBC,EAAiB,SAACC,GACpB,OAAIA,EAAIC,GACCD,EAAIE,OAEJC,QAAQC,OAAO,WAADC,OAAYL,EAAIM,QACzC,ECJIC,EAAY,SAACC,EAAaC,EAAcd,GAC5C,IAAMe,EAAeF,EAAYlD,cAAc,IAAD+C,OAAKI,EAAarB,GAAE,WAClEqB,EAAa9D,UAAUO,OAAOyC,EAAOgB,iBACrCD,EAAa/D,UAAUO,OAAOyC,EAAOiB,YACrCF,EAAa9B,YAAc,EAC7B,EA0BMiC,EAAoB,SAACC,EAAWC,EAAepB,IAP7B,SAACmB,GACvB,OAAOA,EAAU3B,MAAK,SAACsB,GACrB,OAAQA,EAAaO,SAASC,KAChC,GACF,CAIMC,CAAgBJ,IAIlBC,EAAc9B,UAAW,EACzB8B,EAAcpE,UAAUO,OAAOyC,EAAOwB,uBAJtCJ,EAAc9B,UAAW,EACzB8B,EAAcpE,UAAUC,IAAI+C,EAAOwB,qBAKvC,EAwBaC,EAAkB,SAACZ,EAAab,GAC3C,IAAMmB,EAAYO,MAAMC,KAAKd,EAAYe,iBAAiB5B,EAAO6B,gBAC3DT,EAAgBP,EAAYlD,cAAcqC,EAAO8B,sBAEvDX,EAAUY,SAAQ,SAACjB,GACfF,EAAUC,EAAaC,EAAcd,GACrCc,EAAakB,MAAQ,EACzB,IAEAd,EAAkBC,EAAWC,EAAepB,EAC9C,EClFaA,EAAS,CAClBiC,aAAc,eACdJ,cAAe,gBACfC,qBAAsB,iBACtBN,oBAAqB,yBACrBR,gBAAiB,0BACjBC,WAAY,wB,sGCYhB,IAAMiB,EAAahF,SAASS,cAAc,yBACpCwE,EAAYjF,SAASS,cAAc,wBACnCyE,EAAelF,SAAS0E,iBAAiB,iBACzCS,EAAenF,SAASS,cAAc,0BAGtC2E,EAAYpF,SAASS,cAAc,oBACnC4E,EAAerF,SAASS,cAAc,wBACtC6E,EAAatF,SAASS,cAAc,qBACpC8E,EAAcvF,SAASS,cAAc,sBAErC+E,EAAS,CAACJ,EAAWC,EAAcC,EAAYC,GAE/CE,EAAczF,SAAS0F,MAAMD,YAC7BE,EAAW3F,SAAS0F,MAAMC,SAC1BC,EAAY5F,SAAS0F,MAAME,UAE3BC,EAAe7F,SAASS,cAAc,mBACtCqF,EAAqB9F,SAASS,cAAc,yBAC5CsF,EAAgB/F,SAASS,cAAc,mBAEvCuF,EAAahG,SAASS,cAAc,iBAEpCwF,EAAQjG,SAASS,cAAc,iBAC/ByF,EAAUlG,SAASS,cAAc,mBA2CvC,SAASO,EAAWT,GACdA,EAAII,OAAOb,UAAUqG,SAAS,iBARpC,SAA2B5F,GACzB0F,EAAMtE,IAAMpB,EAAII,OAAOgB,IACvBsE,EAAMpE,IAAMtB,EAAII,OAAOkB,IACvBqE,EAAQnE,YAAcxB,EAAII,OAAOkB,GACnC,CAKIuE,CAAiB7F,GACjBX,EAAU0F,GAEd,CAoEA,SAASe,EAAWC,EAAQC,GAC1BA,EAAKC,OAAOzE,YAAcuE,EAAS,gBAAkB,WACvD,CA7GAtB,EAAW/E,iBAAiB,SAAS,WACnCsE,EAAgBa,EAAWtC,GAN3B2C,EAAY3D,KAAKgD,MAAQe,EAAa9D,YACtC0D,EAAYgB,YAAY3B,MAAQgB,EAAmB/D,YAOnDnC,EAAUwF,EACZ,IAGAH,EAAUhF,iBAAiB,SAAS,WAClCsE,EAAgBc,EAAcvC,GAC9BlD,EAAUyF,EACZ,IAGAF,EAAalF,iBAAiB,SAAS,WACrCsE,EAAgBgB,EAAazC,GAC7BlD,EAAU2F,EACZ,IAGAL,EAAaL,SAAQ,SAACnC,GACpB,IAAM7C,EAAQ6C,EAAIgE,QAAQ,UAC1BhE,EAAIzC,iBAAiB,SAAS,WAC1BG,EAAWP,EACf,GACF,IAkBA4F,EAAYxF,iBAAiB,UAG7B,SAA2BM,GHxBD,IAACoG,EAASC,EGyBlCrG,EAAIsG,iBACJR,GAAW,EAAM9F,EAAII,SH1BIgG,EG2BhBlB,EAAY3D,KAAKgD,MH3BQ8B,EG2BDnB,EAAYgB,YAAY3B,MH1BhDgC,MAAM,GAADtD,OAAIV,EAAOC,QAAO,aAAa,CACzCgE,OAAQ,QACR/D,QAASF,EAAOE,QAChBgE,KAAMC,KAAKC,UAAU,CACnBpF,KAAM6E,EACNQ,MAAOP,MAGVQ,KAAKlE,IGmBPkE,MAAK,SAAAC,GACJxB,EAAa9D,YAAcsF,EAAKvF,KAChCgE,EAAmB/D,YAAcsF,EAAKF,MACtCG,QAAQC,IAAI,QAAD/D,OAAS6D,EAAKvF,KAAI,gBAAA0B,OAAe6D,EAAKF,OACnD,IACCC,MAAK,WACJhH,EAAWgF,EACb,IACCoC,OAAM,SAACC,GAAG,OAAKH,QAAQC,IAAIE,EAAI,IAC/BC,SAAQ,WACPrB,GAAW,EAAO9F,EAAII,OACxB,GACF,IAGAgF,EAAS1F,iBAAiB,UAG1B,SAA4BM,GH7EF,IAACoG,EAASgB,EG8ElCpH,EAAIsG,iBACJR,GAAW,EAAM9F,EAAII,SH/EIgG,EGiFhBhB,EAASiC,UAAU9C,MHjFM6C,EGiFChC,EAAS/D,KAAKkD,MHhFxCgC,MAAM,GAADtD,OAAIV,EAAOC,QAAO,UAAU,CACtCgE,OAAQ,OACR/D,QAASF,EAAOE,QAChBgE,KAAMC,KAAKC,UAAU,CACnBpF,KAAM6E,EACN/E,KAAM+F,MAGTP,KAAKlE,IGyEPkE,MAAK,SAACS,GACL,IAAM1G,EAAWN,EAAWgH,EAAMA,EAAK7F,MAAOhB,EAAW8G,EAAuBC,GAChF/B,EAAWgC,QAAQ7G,GACnBwE,EAASsC,QACT7H,EAAWiF,EACb,IACCmC,OAAM,SAAAC,GAAG,OAAIH,QAAQC,IAAIE,EAAI,IAC7BC,SAAQ,WACPrB,GAAW,EAAO9F,EAAII,OACxB,GACF,IAGAiF,EAAU3F,iBAAiB,UAAU,SAACM,GACpCA,EAAIsG,iBACJR,GAAW,EAAM9F,EAAII,QHrDK,SAACiF,GACzB,OAAOkB,MAAM,GAADtD,OAAIV,EAAOC,QAAO,oBAAoB,CAChDgE,OAAQ,QACR/D,QAASF,EAAOE,QAChBgE,KAAMC,KAAKC,UAAU,CACnBgB,OAAQtC,MAGXwB,KAAKlE,EACR,CG6CAiF,CAAW5H,EAAII,OAAOuH,OAAOpD,OAC5BsC,MAAK,SAAAC,GACJtB,EAAc7D,MAAMkG,WAAa,OAAH5E,OAAU6D,EAAKa,OAAM,oBACnDZ,QAAQC,IAAI,oBAAsBF,EAAKa,OACzC,IACCd,MAAK,WACJhH,EAAWmF,EACb,IACCiC,OAAM,SAAAC,GAAG,OAAIH,QAAQC,IAAIE,EAAI,IAC7BC,SAAQ,WACPrB,GAAW,EAAO9F,EAAII,OACxB,GACF,IAGA6E,EAAOX,SAAQ,SAACnE,GACdA,EAAKZ,UAAUC,IAAI,oBACrB,IAOAuD,QAAQ+E,IAAI,CHlJDvB,MAAK,GAAAtD,OAAKV,EAAOC,QAAO,UAAU,CACvCC,QAASF,EAAOE,UAEjBoE,KAAKlE,GAKC4D,MAAK,GAAAtD,OAAKV,EAAOC,QAAO,aAAa,CAC1CC,QAASF,EAAOE,UAEjBoE,KAAKlE,KG2ITkE,MAAK,SAAAkB,GAAmB,I,IAAAC,G,EAAA,E,4CAAAD,I,s1BAAjBE,EAAKD,EAAA,GAAExH,EAAIwH,EAAA,GACjB1C,EAAa9D,YAAchB,EAAKe,KAChCgE,EAAmB/D,YAAchB,EAAKoG,MACtCpB,EAAc7D,MAAMkG,WAAa,OAAH5E,OAAUzC,EAAKmH,OAAM,oBACnDM,EAAM3D,SAAQ,SAACgD,GACb,IAAM1G,EAAWN,EAAWgH,EAAM9G,EAAMC,EAAW8G,EAAuBC,GAC1E/B,EAAWyC,OAAOtH,EACpB,GACF,IACCqG,OAAM,SAACC,GAAG,OAAKH,QAAQC,IAAIE,EAAI,IAEhC,IAAMK,EAAwB,SAACpH,EAAMgI,IHlJN,SAACA,GAC5B,OAAO5B,MAAM,GAADtD,OAAIV,EAAOC,QAAO,WAAAS,OAAUkF,GAAU,CAChD3B,OAAQ,SACR/D,QAAUF,EAAOE,UAElBoE,KAAKlE,EACR,EG6IAyF,CAAcD,EAAOzG,KACpBmF,MAAK,SAACC,GAAI,OJ7IcuB,EI6IElI,EJ7IOmI,EI6IDxB,EAAKwB,QJ5ItCD,EAAQvI,cACRiH,QAAQC,IAAIsB,GAFP,IAAoBD,EAASC,CI6IY,IAC7CrB,OAAM,SAACC,GAAG,OAAKH,QAAQC,IAAIE,EAAI,GAClC,EAEMM,EAAsB,SAACe,EAAcJ,GACxBI,EJ3IFhJ,UAAUqG,SAAS,+BCiBR,SAACuC,GACzB,OAAO5B,MAAM,GAADtD,OAAIV,EAAOC,QAAO,iBAAAS,OAAgBkF,GAAU,CACtD3B,OAAQ,SACR/D,QAASF,EAAOE,UAEjBoE,KAAKlE,EACR,CGqHE6F,CAAWL,GACVtB,MAAK,SAACC,GACL5E,EAAWqG,EAAczB,GACzBC,QAAQC,IAAI,+BAAsCF,EAAKhF,MAAMG,OAC/D,IACCgF,OAAM,SAACC,GAAG,OAAKH,QAAQC,IAAIE,EAAI,IHzIX,SAACiB,GACtB,OAAO5B,MAAM,GAADtD,OAAIV,EAAOC,QAAO,iBAAAS,OAAgBkF,GAAU,CACtD3B,OAAQ,MACR/D,QAASF,EAAOE,UAEjBoE,KAAKlE,EACR,CGqIE8F,CAAQN,GACPtB,MAAK,SAACC,GACL5E,EAAWqG,EAAczB,GACzBC,QAAQC,IAAI,mBAA0BF,EAAKhF,MAAMG,OACnD,IACCgF,OAAM,SAACC,GAAG,OAAKH,QAAQC,IAAIE,EAAI,GAEpC,GFxIgC,SAAC3E,GACd0B,MAAMC,KAAKzE,SAAS0E,iBAAiB5B,EAAOiC,eACpDF,SAAQ,SAAClB,IAfM,SAACA,EAAab,GACtC,IAAMoB,EAAgBP,EAAYlD,cAAcqC,EAAO8B,sBACjDX,EAAYO,MAAMC,KAAKd,EAAYe,iBAAiB5B,EAAO6B,gBACjEX,EAAkBC,EAAWC,EAAepB,GAC5CmB,EAAUY,SAAQ,SAACjB,GACjBA,EAAa3D,iBAAiB,SAAS,YAvC3B,SAAC0D,EAAaC,EAAcd,GAEtCc,EAAaO,SAAS8E,gBACxBrF,EAAasF,kBAAkBtF,EAAauF,QAAQC,cAEpDxF,EAAasF,kBAAkB,IAG5BtF,EAAaO,SAASC,MAGzBV,EAAUC,EAAaC,EAAcd,GA3BvB,SAACa,EAAaC,EAAcwF,EAActG,GAC1D,IAAMe,EAAeF,EAAYlD,cAAc,IAAD+C,OAAKI,EAAarB,GAAE,WAClEqB,EAAa9D,UAAUC,IAAI+C,EAAOgB,iBAClCD,EAAa/D,UAAUC,IAAI+C,EAAOiB,YAClCF,EAAa9B,YAAcqH,CAC7B,CAoBIC,CAAU1F,EAAaC,EAAcA,EAAa0F,kBAAmBxG,EAIzE,CA2BMyG,CAAQ5F,EAAaC,EAAcd,GACnCkB,EAAkBC,EAAWC,EAAepB,EAC9C,GACF,GACF,CAMI0G,CAAkB7F,EAAab,EACjC,GACF,CEqIA2G,CAAiB3G,E","sources":["webpack://mesto-project-ff/./src/scripts/modal.js","webpack://mesto-project-ff/./src/scripts/card.js","webpack://mesto-project-ff/./src/scripts/api.js","webpack://mesto-project-ff/./src/scripts/validation.js","webpack://mesto-project-ff/./src/scripts/validationConfig.js","webpack://mesto-project-ff/./src/scripts/index.js"],"sourcesContent":["// отрытие модального окна\nfunction openPopup(popup) {\n  popup.classList.add('popup_is-opened');\n  document.addEventListener('keydown', escapeHandler);\n  popup.addEventListener('click', closeByOverlay);\n};\n\n// закрытиe модального окна\nfunction closePopup(popup) {\n  popup.classList.remove('popup_is-opened');\n  document.removeEventListener('keydown', escapeHandler);\n  popup.removeEventListener('click', closeByOverlay);\n};\n\n// закрытие по Esc\nfunction escapeHandler (evt) {\n  if (evt.key === \"Escape\") {\n    closePopup(document.querySelector('.popup_is-opened'));\n  };\n};\n\n// Закрытие модального окна по оверлей\nfunction closeByOverlay(item) {\n  if (item.target === item.currentTarget){\n    closePopup(item.target);\n  }\n};\n\nexport { openPopup, closePopup}","export function createCard(cardContent, user, showImage, hdc, hlb) {\n\n  const cardTemplate = document.querySelector('#card-template').content;\n\n  const cardItem = cardTemplate.querySelector('.card').cloneNode(true);\n  const cardImage = cardItem.querySelector('.card__image');\n  const cardTitle = cardItem.querySelector('.card__title')\n  const deleteButton = cardItem.querySelector('.card__delete-button');\n  const likeButton = cardItem.querySelector('.card__like-button');\n  const likeCount = cardItem.querySelector('.card__like-count');\n\n  cardImage.src = cardContent.link;\n  cardImage.alt = cardContent.name;\n  cardTitle.textContent = cardContent.name;\n\n// проверка: является ли пользователь автором карточки\n  if (cardContent.owner._id !== user._id) {\n    deleteButton.style.display = 'none';\n    deleteButton.disabled = true;\n  } else {\n    deleteButton.addEventListener('click', () => hdc(cardItem, cardContent));\n  };\n\n  // проверка лайка у пользователя\n  const matchUserId = cardContent.likes.some((id) => {return id._id === user._id});\n  if (matchUserId) {\n    likeButton.classList.add('card__like-button_is-active');\n  };\n\n  // обновление счетчиков лайков\n  likeCount.textContent = cardContent.likes.length;\n\n  likeButton.addEventListener('click', evt => hlb(evt.target, cardContent._id));\n  cardImage.addEventListener('click', showImage);\n\n  return cardItem;\n};\n\n// удаление карточки\nexport function deleteCard(element, message) {\n  element.remove();\n  console.log(message);\n}\n\n// проверка наличия лайка\nexport const statusLikeBtn = (likeBtn) => {\n  return likeBtn.classList.contains('card__like-button_is-active');\n};\n\n// обновление состояния кнопки like и счетчика\nexport const updateLike = (btn, count) => {\n  btn.classList.toggle('card__like-button_is-active')\n  btn.nextElementSibling.textContent = count.likes.length;\n}\n ","const config = {\n    baseUrl: 'https://nomoreparties.co/v1/cohort-mag-4',\n    headers: {\n      authorization: '84299558-2d35-4255-81ed-1ece867540fe',\n      'Content-Type': 'application/json'\n    }\n  }\n\nconst handleResponse = (res) => {\n    if (res.ok) {\n      return res.json()\n    }\n      return Promise.reject(`Ошибка: ${res.status}`);\n  };\n\n// Запрос массива карточек\nexport const getCards = () => {\n    return fetch (`${config.baseUrl}/cards`, {\n      headers: config.headers\n    })\n    .then(handleResponse)\n  }\n  \n  // Запрос данных пользователя\n  export const getUser = () => {\n    return fetch (`${config.baseUrl}/users/me`, {\n      headers: config.headers\n    })\n    .then(handleResponse)\n  }\n  \n  // Запрос на удаление карточки\n  export const deleteCardAPI = (cardId) => {\n    return fetch(`${config.baseUrl}/cards/${cardId}`, {\n      method: 'DELETE',\n      headers:  config.headers,\n    })\n    .then(handleResponse)\n  }\n  \n  // Запрос на размещение новой карточки\n  export const postCard = (newName, newLink) => {\n    return fetch(`${config.baseUrl}/cards`, {\n      method: 'POST',\n      headers: config.headers,\n      body: JSON.stringify({\n        name: newName,\n        link: newLink\n      })\n    })\n    .then(handleResponse)\n  }\n  \n  // Запрос при постановке лайка\n  export const putLike = (cardId) => {\n    return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\n      method: 'PUT',\n      headers: config.headers,\n    })\n    .then(handleResponse)\n  }\n  \n  // Запрос при снятии лайка\n  export const deleteLike = (cardId) => {\n    return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\n      method: 'DELETE',\n      headers: config.headers,\n    })\n    .then(handleResponse)\n  }\n  \n  // редактирование профиля\n  export const editUser = (newName, newDecription) => {\n    return fetch(`${config.baseUrl}/users/me`, {\n      method: 'PATCH',\n      headers: config.headers,\n      body: JSON.stringify({\n        name: newName,\n        about: newDecription\n      })\n    })\n    .then(handleResponse)\n  };\n  \n  // редактирование аватара\n  export const editAvatar = (newAvatar) => {\n    return fetch(`${config.baseUrl}/users/me/avatar`, {\n      method: 'PATCH',\n      headers: config.headers,\n      body: JSON.stringify({\n        avatar: newAvatar\n      })\n    })\n    .then(handleResponse)\n  };","// отображение сообщения об ошибке для конкретного поля ввода\nconst showError = (formElement, inputElement, errorMessage, config) => {\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\n  inputElement.classList.add(config.inputErrorClass);\n  errorElement.classList.add(config.errorClass);\n  errorElement.textContent = errorMessage;\n};\n\n// сокрытие сообщения об ошибке для конкретного поля \nconst hideError = (formElement, inputElement, config) => {\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\n  inputElement.classList.remove(config.inputErrorClass);\n  errorElement.classList.remove(config.errorClass);\n  errorElement.textContent = '';\n};\n\n// проверка валидности полей\nconst isValid = (formElement, inputElement, config) => {\n\n  if (inputElement.validity.patternMismatch) {\n    inputElement.setCustomValidity(inputElement.dataset.errorMessage);\n  } else {\n    inputElement.setCustomValidity(\"\");\n  }\n\n  if (!inputElement.validity.valid) {\n    showError(formElement, inputElement, inputElement.validationMessage, config);\n  } else {\n    hideError(formElement, inputElement, config);\n  }\n};\n\n// проверка наличия невалидных полей ввода\nconst hasInvalidInput = (inputList) => {\n  return inputList.some((inputElement) => {\n    return !inputElement.validity.valid;\n  });\n}\n\n// переключение состояния кнопки отправки формы\nconst toggleButtonState = (inputList, buttonElement, config) => {\n  if (hasInvalidInput(inputList)) {\n    buttonElement.disabled = true;\n    buttonElement.classList.add(config.inactiveButtonClass);\n  } else {\n    buttonElement.disabled = false;\n    buttonElement.classList.remove(config.inactiveButtonClass);\n  }\n};\n\n// установка слушателей событий на поля ввода формы\nconst setEventListeners = (formElement, config) => {\n  const buttonElement = formElement.querySelector(config.submitButtonSelector);\n  const inputList = Array.from(formElement.querySelectorAll(config.inputSelector));\n  toggleButtonState(inputList, buttonElement, config);\n  inputList.forEach((inputElement) => {\n    inputElement.addEventListener('input', () => {\n      isValid(formElement, inputElement, config);\n      toggleButtonState(inputList, buttonElement, config);\n    });\n  });\n};\n\n// включение валидации для всех форм на странице\nexport const enableValidation = (config) => {\n  const formList = Array.from(document.querySelectorAll(config.formSelector));\n  formList.forEach((formElement) => {\n    setEventListeners(formElement, config);\n  });\n};\n\n// очистка валидации и сброс форм\nexport const clearValidation = (formElement, config) => {\n  const inputList = Array.from(formElement.querySelectorAll(config.inputSelector));\n  const buttonElement = formElement.querySelector(config.submitButtonSelector);\n  \n  inputList.forEach((inputElement) => {\n      hideError(formElement, inputElement, config);\n      inputElement.value = ''; \n  });\n\n  toggleButtonState(inputList, buttonElement, config);\n};","export const config = {\n    formSelector: '.popup__form',\n    inputSelector: '.popup__input',\n    submitButtonSelector: '.popup__button',\n    inactiveButtonClass: 'popup__button_disabled',\n    inputErrorClass: 'popup__input_type_error',\n    errorClass: 'popup__error_visible'\n  }","import '../pages/index.css';\nimport {closePopup, openPopup} from './modal.js';\nimport {createCard, deleteCard, updateLike, statusLikeBtn} from './card.js';\nimport {getCards,\n        getUser,\n        deleteCardAPI,\n        postCard,\n        putLike,\n        deleteLike,\n        editUser,\n        editAvatar\n        } from './api.js';\nimport {enableValidation,\n        clearValidation\n        } from './validation.js';\nimport {config} from './validationConfig.js'\n\n// кнопки \"редактировать\", \"добавить\", \"закрыть\"\nconst editButton = document.querySelector('.profile__edit-button');\nconst addButton = document.querySelector('.profile__add-button');\nconst closeButtons = document.querySelectorAll('.popup__close');\nconst avatarButton = document.querySelector('.profile__image-button');\n\n// модальные окна  \nconst popupEdit = document.querySelector('.popup_type_edit');\nconst popupNewCard = document.querySelector('.popup_type_new-card');\nconst popupImage = document.querySelector('.popup_type_image');\nconst popupAvatar = document.querySelector('.popup_type_avatar');\n \nconst popups = [popupEdit, popupNewCard, popupImage, popupAvatar];\n \nconst editProfile = document.forms.editProfile;\nconst newPlace = document.forms.newPlace;\nconst newAvatar = document.forms.newAvatar;\n\nconst profileTitle = document.querySelector('.profile__title');\nconst profileDescription = document.querySelector('.profile__description');\nconst profileAvatar = document.querySelector('.profile__image');\n \nconst placesList = document.querySelector('.places__list');\n\nconst image = document.querySelector('.popup__image');\nconst caption = document.querySelector('.popup__caption');\n\n// заполнение полей в модальном окне профиля\nfunction typeFields () {\n  editProfile.name.value = profileTitle.textContent;\n  editProfile.description.value = profileDescription.textContent;\n};\n\n// слушатель на кнопке \"профиль\"\neditButton.addEventListener('click', function() {\n  clearValidation(popupEdit, config);\n  typeFields();  \n  openPopup(popupEdit);\n});\n\n// слушатель на кнопке \"добавить\" \naddButton.addEventListener('click', function() {\n  clearValidation(popupNewCard, config);\n  openPopup(popupNewCard);\n});\n\n// слушатель на кнопке \"аватар\"\navatarButton.addEventListener('click', function() {\n  clearValidation(popupAvatar, config);\n  openPopup(popupAvatar);\n})\n\n// слушатель на копку \"закрыть\"\ncloseButtons.forEach((btn) => {\n  const popup = btn.closest('.popup')\n  btn.addEventListener('click', () => {\n      closePopup(popup);\n  });\n});\n\n// сборка окна с изображением\nfunction createImagePopup (evt) { \n  image.src = evt.target.src;\n  image.alt = evt.target.alt\n  caption.textContent = evt.target.alt;\n}\n\n// открытия окна с изображением\nfunction showImage (evt) {\n  if (evt.target.classList.contains('card__image')) {\n    createImagePopup(evt);\n    openPopup(popupImage);\n  };\n}\n\n// слушатель окна с \"профилем\"\neditProfile.addEventListener('submit', profileFormSubmit);\n\n// обработчик формы модальног окна \"профиль\"\nfunction profileFormSubmit(evt) {\n  evt.preventDefault();  \n  renderLoad(true, evt.target);\n  editUser(editProfile.name.value, editProfile.description.value)\n  .then(data => {\n    profileTitle.textContent = data.name;  \n    profileDescription.textContent = data.about;  \n    console.log(`Имя: ${data.name}\\nОписание: ${data.about}`);\n  })\n  .then(() => {\n    closePopup(popupEdit)\n  })\n  .catch((err) => console.log(err))\n  .finally(() => {\n    renderLoad(false, evt.target);\n  });\n};\n\n// слушалетль на форме новой карточки\nnewPlace.addEventListener('submit', newPlaceFormSubmit);\n\n// обработчик формы модального окна новой карточки\nfunction newPlaceFormSubmit(evt){\n  evt.preventDefault();  \n  renderLoad(true, evt.target); \n \n  postCard(newPlace.placeName.value, newPlace.link.value)\n  .then((card) => {\n    const cardItem = createCard(card, card.owner, showImage, handlerOfDeleteButton, handlerOfLikeButton);\n    placesList.prepend(cardItem);\n    newPlace.reset();\n    closePopup(popupNewCard);\n  })\n  .catch(err => console.log(err))\n  .finally(() => {\n    renderLoad(false, evt.target);\n  })\n};\n\n// редактирование аватарки\nnewAvatar.addEventListener('submit', (evt) => {\n  evt.preventDefault();\n  renderLoad(true, evt.target);\n  editAvatar(evt.target.avatar.value)\n  .then(data => {\n    profileAvatar.style.background = `url(${data.avatar}) center / cover`;\n    console.log('Ссылка на аватар ' + data.avatar)\n  })\n  .then(() => {\n    closePopup(popupAvatar);\n  })\n  .catch(err => console.log(err))\n  .finally(() => {\n    renderLoad(false, evt.target);\n  })\n});\n\n// анимация открытия модального окна\npopups.forEach((item) => {\n  item.classList.add('popup_is-animated');\n})\n \nfunction renderLoad(isLoad, form) {\n  form.button.textContent = isLoad ? 'Сохранение...' : 'Сохранить'; \n};\n\n// первоначальная загрузка карточек-пользователь\nPromise.all([\n  getCards(),\n  getUser()\n])\n.then(([cards, user]) => { \n  profileTitle.textContent = user.name;\n  profileDescription.textContent = user.about;\n  profileAvatar.style.background = `url(${user.avatar}) center / cover`;\n  cards.forEach((card) => {\n    const cardItem = createCard(card, user, showImage, handlerOfDeleteButton, handlerOfLikeButton);\n    placesList.append(cardItem);\n  })\n})\n.catch((err) => console.log(err));\n \nconst handlerOfDeleteButton = (item, cardId) => {\n  deleteCardAPI(cardId._id)\n  .then((data) => deleteCard(item, data.message))\n  .catch((err) => console.log(err));\n}\n \nconst handlerOfLikeButton = (buttonNoLike, cardId) => {\n  if(statusLikeBtn(buttonNoLike)) {\n    deleteLike(cardId)\n    .then((data) => {\n      updateLike(buttonNoLike, data);\n      console.log('отсутствие лайка \\n' + 'счетчик: ' + data.likes.length);\n    })\n    .catch((err) => console.log(err));\n  } else {\n    putLike(cardId)\n    .then((data) => {\n      updateLike(buttonNoLike, data);\n      console.log('лайк \\n' + 'счетчик: ' + data.likes.length);\n    })\n    .catch((err) => console.log(err));\n  }\n};\n\nenableValidation(config); \n"],"names":["openPopup","popup","classList","add","document","addEventListener","escapeHandler","closeByOverlay","closePopup","remove","removeEventListener","evt","key","querySelector","item","target","currentTarget","createCard","cardContent","user","showImage","hdc","hlb","cardItem","content","cloneNode","cardImage","cardTitle","deleteButton","likeButton","likeCount","src","link","alt","name","textContent","owner","_id","style","display","disabled","likes","some","id","length","updateLike","btn","count","toggle","nextElementSibling","config","baseUrl","headers","authorization","handleResponse","res","ok","json","Promise","reject","concat","status","hideError","formElement","inputElement","errorElement","inputErrorClass","errorClass","toggleButtonState","inputList","buttonElement","validity","valid","hasInvalidInput","inactiveButtonClass","clearValidation","Array","from","querySelectorAll","inputSelector","submitButtonSelector","forEach","value","formSelector","editButton","addButton","closeButtons","avatarButton","popupEdit","popupNewCard","popupImage","popupAvatar","popups","editProfile","forms","newPlace","newAvatar","profileTitle","profileDescription","profileAvatar","placesList","image","caption","contains","createImagePopup","renderLoad","isLoad","form","button","description","closest","newName","newDecription","preventDefault","fetch","method","body","JSON","stringify","about","then","data","console","log","catch","err","finally","newLink","placeName","card","handlerOfDeleteButton","handlerOfLikeButton","prepend","reset","avatar","editAvatar","background","all","_ref","_ref2","cards","append","cardId","deleteCardAPI","element","message","buttonNoLike","deleteLike","putLike","patternMismatch","setCustomValidity","dataset","errorMessage","showError","validationMessage","isValid","setEventListeners","enableValidation"],"sourceRoot":""}